---
ID: 3494
post_title: Python chapter 10 learning notes
post_name: python-chapter-10-learning-notes
author: 小奥
post_date: 2017-10-18 23:31:58
layout: post
link: >
  http://www.yushuai.me/2017/10/18/3494.html
published: true
tags:
  - Python
  - python学习
categories:
  - Python
---
<p style="margin-left:63px;vertical-align:middle"><span style="font-size:13px;font-family:Symbol">·</span><span style="font-size:15px;font-family:&#39;Times New Roman&#39;,serif">Reading data from file</span></p><p style="margin-left:99px;vertical-align:middle"><span style="font-size:13px;font-family:&#39;Courier New&#39;">o</span><span style="font-size:15px;font-family:&#39;Times New Roman&#39;,serif">Format:</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><em><span style="font-size:15px;font-family: &#39;Times New Roman&#39;,serif"></span></em></p><pre class="brush:python;toolbar:false">with&nbsp;open(&#39;pi_digits.txt&#39;)&nbsp;as&nbsp;file_object:
&nbsp;&nbsp;&nbsp;&nbsp;contents&nbsp;=&nbsp;file_object.read()
&nbsp;&nbsp;&nbsp;&nbsp;print(contents)</pre><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><em><span style="font-size:15px;font-family: &#39;Times New Roman&#39;,serif"></span></em><br/></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><span style="font-size:15px;font-family: &#39;Times New Roman&#39;,serif">In line one, the function <strong><em>open(filename, &#39;x&#39;)</em></strong> is used to open a file, &#39;x&#39; can be relpaced by &#39;w&#39;, &#39;r&#39;, &#39;a&#39;, &#39;r+&#39;.</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><span style="font-size:15px;font-family: &#39;Times New Roman&#39;,serif;color:#555555">r</span><strong><span style="font-size:15px;color:#555555">只读</span></strong><span style="font-size:15px;color:#555555">，</span><span style="font-size:15px;font-family:&#39;Times New Roman&#39;,serif;color:#555555">r+</span><strong><span style="font-size:15px;color:#555555">读写，</span></strong><span style="font-size:15px;color:#555555">不创建</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><span style="font-size:15px;font-family: &#39;Times New Roman&#39;,serif;color:red">w</span><strong><span style="font-size:15px;color:red">新建只写</span></strong><span style="font-size:15px;color:red">，</span><span style="font-size:15px;font-family:&#39;Times New Roman&#39;,serif;color:red">w+</span><strong><span style="font-size:15px;color:red">新建读写</span></strong><span style="font-size:15px;color:#555555">，二者都会</span><span style="font-size: 15px; color: #FF0000;"><strong>将文件内容清零</strong></span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><span style="font-size:15px;color:#555555">（以</span><span style="font-size:15px;font-family: &#39;Times New Roman&#39;,serif;color:#555555">w</span><span style="font-size:15px;color:#555555">方式打开，不能读出。</span><span style="font-size:15px;font-family:&#39;Times New Roman&#39;,serif;color:#555555">w+</span><span style="font-size:15px;color:#555555">可读写）</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><strong><span style="font-size:15px;color:red">以a,a+的方式打开文件，附加方式打开</span></strong></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><span style="font-size:15px;color:#555555">（<strong>a</strong>：<strong>附加写</strong>方式打开，不可读；<strong>a+</strong>:<strong>&nbsp;</strong><strong>附加读写</strong>方式打开）</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><span style="font-size:15px;color:#555555">以 &#39;U&#39; 标志打开文件, 所有的行分割符通过 Python 的输入方法(例#如 read*() )，返回时都会被替换为换行符\n. (&#39;rU&#39; 模式也支持 &#39;rb&#39; 选项) .&nbsp;</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><span style="font-size:15px;color:#555555">r</span><span style="font-size:15px;color:#555555">和U要求文件必须存在</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><strong><span style="font-size:15px;color:#555555">不可读的打开方式</span></strong><span style="font-size: 15px;color:#555555">：<strong>w和a</strong></span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><strong><span style="font-size:15px;color:#555555">若不存在会创建新文件的打开方式：a，a+，w，w+</span></strong></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><span style="font-size:15px;font-family: &#39;Times New Roman&#39;,serif">The key word <strong><em>with…as…</em></strong> is an easy way to name something as xxx. </span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><span style="font-size:15px;font-family: &#39;Times New Roman&#39;,serif">Using the method <strong><em>read()</em></strong> can read the data to contents.</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><span style="font-size:15px;font-family: &#39;Times New Roman&#39;,serif">Using the method <strong><em>readlines()</em></strong> can read the data frome file, and then put them into a list.</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><span style="font-size:15px;font-family: &#39;Times New Roman&#39;,serif">Using the method<strong> strip()</strong> can delete the left blank.</span></p><p style="margin-left:63px;vertical-align:middle"><span style="font-size:13px;font-family:Symbol">·<span style="font-variant-numeric: normal;font-stretch: normal;font-size: 9px;line-height: normal;font-family: &#39;Times New Roman&#39;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size:15px;font-family:&#39;Times New Roman&#39;,serif">Writing data into file</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><span style="font-size:15px;font-family: &#39;Times New Roman&#39;,serif"></span></p><pre class="brush:python;toolbar:false">filename&nbsp;=&nbsp;&#39;programming.txt&#39;
&nbsp;
with&nbsp;open(filename,&nbsp;&#39;w&#39;)&nbsp;as&nbsp;file_object:
&nbsp;&nbsp;&nbsp;&nbsp;file_object.write(&quot;I&nbsp;love&nbsp;python.&quot;)</pre><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><span style="font-size:15px;font-family: &#39;Times New Roman&#39;,serif"></span><br/></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><strong><span style="font-size:15px;font-family: &#39;Times New Roman&#39;,serif;color:red">NOTE: python can only writing string into text file. If you want to writing number into text &nbsp;file, please use str() .</span></strong></p><p style="margin-left:63px;vertical-align:middle"><span style="font-size:13px;font-family:Symbol">·<span style="font-variant-numeric: normal;font-stretch: normal;font-size: 9px;line-height: normal;font-family: &#39;Times New Roman&#39;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size:15px;font-family:&#39;Times New Roman&#39;,serif">Exception</span></p><p style="margin-left:99px;vertical-align:middle"><span style="font-size:13px;font-family:&#39;Courier New&#39;">o<span style="font-variant-numeric: normal;font-stretch: normal;font-size: 9px;line-height: normal;font-family: &#39;Times New Roman&#39;">&nbsp;&nbsp; </span></span><span style="font-size:15px;font-family:&#39;Times New Roman&#39;,serif">ZeroDivisionError</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><em><span style="font-size:15px;font-family: &#39;Times New Roman&#39;,serif"></span></em></p><pre class="brush:python;toolbar:false">try:
&nbsp;&nbsp;&nbsp;&nbsp;print(5/0)
except&nbsp;ZeroDivisionError:
&nbsp;&nbsp;&nbsp;&nbsp;print(&quot;You&nbsp;can&#39;t&nbsp;divide&nbsp;by&nbsp;zero!&quot;)</pre><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><em><span style="font-size:15px;font-family: &#39;Times New Roman&#39;,serif"></span></em><br/></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><span style="font-size:15px;font-family: &#39;Times New Roman&#39;,serif">Using <strong><em>try-except</em></strong> is good way to tell user that you can&#39;t divide by zero. It is also can be used in other exceptions.</span></p><p style="margin-left:135px;vertical-align:middle"><span style="font-size:13px;font-family:Symbol">·<span style="font-variant-numeric: normal;font-stretch: normal;font-size: 9px;line-height: normal;font-family: &#39;Times New Roman&#39;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size:15px;font-family:&#39;Times New Roman&#39;,serif">If you don&#39;t want to tell user anything, you can just do as followed:</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><em><span style="font-size:15px;font-family: &#39;Times New Roman&#39;,serif"></span></em></p><pre class="brush:python;toolbar:false">except&nbsp;ZeroDivisionError:
&nbsp;&nbsp;&nbsp;&nbsp;pass</pre><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><em><span style="font-size:15px;font-family: &#39;Times New Roman&#39;,serif"></span></em><br/></p><p style="margin-left:135px;vertical-align:middle"><span style="font-size:13px;font-family:Symbol">·<span style="font-variant-numeric: normal;font-stretch: normal;font-size: 9px;line-height: normal;font-family: &#39;Times New Roman&#39;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size:15px;font-family:&#39;Times New Roman&#39;,serif">You can also use <strong><em>try-except-else</em></strong>, if it is not error, it can figure out the answer. For example,</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><em><span style="font-size:15px;font-family: &#39;Times New Roman&#39;,serif"></span></em></p><pre class="brush:python;toolbar:false">print(&quot;Give&nbsp;me&nbsp;two&nbsp;numbers,&nbsp;and&nbsp;I&#39;ll&nbsp;divide&nbsp;them.&quot;)
print(&quot;Enter&nbsp;&#39;q&#39;&nbsp;to&nbsp;quit.&quot;)
while&nbsp;True:
&nbsp;&nbsp;&nbsp;&nbsp;first&nbsp;=&nbsp;input(&quot;\nFirst&nbsp;Number:&nbsp;&quot;)
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;first&nbsp;==&#39;q&#39;:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break
&nbsp;&nbsp;&nbsp;&nbsp;second&nbsp;=&nbsp;input(&quot;Second&nbsp;number:&nbsp;&quot;)
&nbsp;&nbsp;&nbsp;&nbsp;try:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;answer&nbsp;=&nbsp;int(first)/int(second)
&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;ZeroDivisionError:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(&quot;You&nbsp;can&#39;t&nbsp;divide&nbsp;by&nbsp;0!&quot;)
&nbsp;&nbsp;&nbsp;&nbsp;else:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(answer)</pre><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><em><span style="font-size:15px;font-family: &#39;Times New Roman&#39;,serif"></span></em><br/></p><p style="margin-left:99px;vertical-align:middle"><span style="font-size:13px;font-family:&#39;Courier New&#39;">o<span style="font-variant-numeric: normal;font-stretch: normal;font-size: 9px;line-height: normal;font-family: &#39;Times New Roman&#39;">&nbsp;&nbsp; </span></span><span style="font-size:15px;font-family:&#39;Times New Roman&#39;,serif">FileNotFoundError</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><span style="font-size:15px;font-family: &#39;Times New Roman&#39;,serif">Just like ZeroDivisionError</span></p><p style="margin-left:99px;vertical-align:middle"><span style="font-size:13px;font-family:&#39;Courier New&#39;">o<span style="font-variant-numeric: normal;font-stretch: normal;font-size: 9px;line-height: normal;font-family: &#39;Times New Roman&#39;">&nbsp;&nbsp; </span></span><span style="font-size:15px;font-family:&#39;Times New Roman&#39;,serif">Analysis text file</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><span style="font-size:15px;font-family: &#39;Times New Roman&#39;,serif">If we meet this error:<strong><em><span style="color:#70AD47">UnicodeDecodeError: &#39;gbk&#39; codec can&#39;t decode byte 0x99 in position 1056: illegal multibyte sequence</span></em></strong></span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><span style="font-size:15px;font-family: &#39;Times New Roman&#39;,serif">We need to do this: </span></p><pre class="brush:python;toolbar:false">with&nbsp;open(filename,&nbsp;encoding=&#39;UTF-8&#39;)&nbsp;as&nbsp;something:#REMEMBER&nbsp;IT!</pre><p style="margin-left:135px;vertical-align:middle"><span style="font-size:13px;font-family:Symbol">·<span style="font-variant-numeric: normal;font-stretch: normal;font-size: 9px;line-height: normal;font-family: &#39;Times New Roman&#39;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size:15px;font-family:&#39;Times New Roman&#39;,serif">How to figure out the word number in one file?</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:135px;margin-bottom:0"><span style="font-size:15px;font-family: &#39;Times New Roman&#39;,serif">Using the method <strong><em>split()</em></strong>.For example,</span></p><pre class="brush:python;toolbar:false">words&nbsp;=&nbsp;contents.split()</pre><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:135px;margin-bottom:0"><em><span style="font-size:15px;font-family: &#39;Times New Roman&#39;,serif"></span></em><br/></p><p style="margin-left:63px;vertical-align:middle"><span style="font-size:13px;font-family:Symbol">·<span style="font-variant-numeric: normal;font-stretch: normal;font-size: 9px;line-height: normal;font-family: &#39;Times New Roman&#39;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size:15px;font-family:&#39;Times New Roman&#39;,serif">HOW TO USE JSON?</span></p><p style="margin-left:99px;vertical-align:middle"><span style="font-size:13px;font-family:&#39;Courier New&#39;">o<span style="font-variant-numeric: normal;font-stretch: normal;font-size: 9px;line-height: normal;font-family: &#39;Times New Roman&#39;">&nbsp;&nbsp; </span></span><strong><em><span style="font-size:15px;font-family:&#39;Times New Roman&#39;,serif">json.dump()</span></em></strong><span style="font-size:15px;font-family:&#39;Times New Roman&#39;,serif"> to storage data(</span><span style="font-size:15px;font-family:&#39;微软雅黑&#39;,sans-serif">存储数据</span><span style="font-size:15px;font-family:&#39;Times New Roman&#39;,serif">)</span></p><p style="margin-left:99px;vertical-align:middle"><span style="font-size:13px;font-family:&#39;Courier New&#39;">o<span style="font-variant-numeric: normal;font-stretch: normal;font-size: 9px;line-height: normal;font-family: &#39;Times New Roman&#39;">&nbsp;&nbsp; </span></span><strong><em><span style="font-size:15px;font-family:&#39;Times New Roman&#39;,serif">json.load()</span></em></strong><span style="font-size:15px;font-family:&#39;Times New Roman&#39;,serif"> to read data</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:99px;margin-bottom:0"><span style="font-size:15px;font-family: &#39;Times New Roman&#39;,serif">For example,</span></p><pre class="brush:python;toolbar:false">import&nbsp;json
numbers&nbsp;=&nbsp;[2,3,4,5,6,7,8,9,10,11,12,13]
filename&nbsp;=&nbsp;&#39;numbers.json&#39;
with&nbsp;open(filename,&nbsp;&#39;w&#39;)&nbsp;as&nbsp;f_obj:
&nbsp;&nbsp;&nbsp;&nbsp;json.dump(numbers,&nbsp;f_obj)
with&nbsp;open(filename,&nbsp;&#39;r&#39;)&nbsp;as&nbsp;f_ob:
&nbsp;&nbsp;&nbsp;&nbsp;numbs&nbsp;=&nbsp;json.load(f_ob)
print(numbs)</pre><p><span style="font-family: &quot;times new roman&quot;;">R</span><span style="font-family: &quot;times new roman&quot;;">econsitution in the book.</span></p>