---
ID: 3322
post_title: >
  【转载】把Matlab里求相关函数的xcorr命令彻底搞清楚
post_name: '%e3%80%90%e8%bd%ac%e8%bd%bd%e3%80%91%e6%8a%8amatlab%e9%87%8c%e6%b1%82%e7%9b%b8%e5%85%b3%e5%87%bd%e6%95%b0%e7%9a%84xcorr%e5%91%bd%e4%bb%a4%e5%bd%bb%e5%ba%95%e6%90%9e%e6%b8%85%e6%a5%9a'
author: 小奥
post_date: 2017-01-13 17:40:03
layout: post
link: >
  http://www.yushuai.me/2017/01/13/3322.html
published: true
tags:
  - Matlab
categories:
  - 慕课学习
---
用过Matlab的人都知道，Matlab的命令总是能一石三鸟，通过改变输入参数的注释项即可实现不同功能，如今xcorr命令的难点就在于其有四个注释项，这些注释项使得计算的结果各有不同，本文将详细介绍对应每个注释项Matlab是如何计算的，当然本文考虑输入的是一个简单一维序列x=[1，2，3]，序列中数据对应的序号依次为1，2，3（请读者在阅读下文时，不要把序号和数据值弄混，这里只是个特例），其他情况读者可以轻松扩展得到。首先确定一下，该序列的均值为2，方差值为0.6667.这个应该不用说怎么算的吧。然后读者需要了解的是该命令意在计算序列中间隔不同距离的数据之间的关系。<!--more-->

<strong>第一：缺省注释项</strong>，[a,b]=xcorr(x),通过该命令计算的结果为：a=3 8 14 8 3;b=-2 -1 0 1 2.

下面介绍一下，该过程计算机是如何计算的，首先讲b的计算，设一维序列的长度为N，则序列中任意两个数据序号相减，最小值为1-N，最大值为N-1，且能取遍两者之间的所有整数，将这些数从小到大排列得到的就是b；然后讲a的计算，在缺省注释项的情况下，a的计算是这样的，a的每一项是对应b的每一项的

1、当b（1）=-2时，计算a（1）时只用到一组数据——（3，1）注意顺序，只有这两个数据的序号相减（后面数据的序号减去前面的）满足b=-2，因此a（1）的计算公式为：3*1=3

2、当b（2）=-1时，计算a（2）时用到两组数据——（2，1）和（3，2），这两组数据的序号相减（后面数据的序号减去前面的）满足b=-1，因此a（2）的计算公式为：2*1+3*2=8

3、当b（3）=0时，计算a（3）时用到三组数据——（1，1）、（2，2）、（3，3），这三组数据的序号相减（后面数据的序号减去前面的）满足b=0，因此a（3）的计算公式为：1*1+2*2+3*3=14

4、当b（4）=1时，计算a（4）时用到两组数据——（1，2）和（2，3），（读者请对比和情况2的区别），这两组数据的序号相减（后面数据的序号减去前面的）满足b=1，因此a（4）的计算公式为：1*2+2*3=8

5、当b（5）=2时，计算a（4）时用到一组数据——（1，3），（读者请对比和情况1的区别），这两组数据的序号相减（后面数据的序号减去前面的）满足b=2，因此a（4）的计算公式为：1*3=3

<strong>第二：注释项为‘unbiased’</strong>，[a，b]=xcorr（x，‘unbiased’），通过该命令计算的结果为：a=3 4 4.6667 4 3；b=-2 -1 0 1 2.下面介绍计算机如何计算该过程，b的计算在四种注释项的情况下是相同的，就不再讲述了。a的计算仍是和b的每一项相对应的。

1、当b（1）=-2时，计算a（1）时只用到一组数据（记N=1）——（3，1）注意顺序，只有这两个数据的序号相减（后面数据的序号减去前面的）满足b=-2，因此a（1）的计算公式为：（3*1）/1=3

2、当b（2）=-1时，计算a（2）时用到两组数据（记N=2）——（2，1）和（3，2），这两组数据的序号相减（后面数据的序号减去前面的）满足b=-1，因此a（2）的计算公式为：（2*1+3*2）/2=4

3、当b（3）=0时，计算a（3）时用到三组数据（记N=3）——（1，1）、（2，2）、（3，3），这三组数据的序号相减（后面数据的序号减去前面的）满足b=0，因此a（3）的计算公式为：（1*1+2*2+3*3）/3=4.6667

4、当b（4）=1时，计算a（4）时用到两组数据（记N=2）——（1，2）和（2，3），（读者请对比和情况2的区别），这两组数据的序号相减（后面数据的序号减去前面的）满足b=1，因此a（4）的计算公式为：（1*2+2*3）/2=4

5、当b（5）=2时，计算a（4）时用到一组数据（记N=1）——（1，3），（读者请对比和情况1的区别），这两组数据的序号相减（后面数据的序号减去前面的）满足b=2，因此a（4）的计算公式为：（1*3）/1=3

<strong>第三：注释项为‘biased’</strong>，[a，b]=xcorr（x，‘biased’），通过该命令计算的结果为：a= <wbr /> 1.0000 <wbr /> <wbr /> <wbr />2.6667 <wbr /> <wbr /> <wbr /> 4.6667 <wbr /> <wbr /> <wbr /> 2.6667 <wbr /> <wbr /> <wbr /> 1.0000，b=-2 -1 0 1 2。下面介绍计算机如何计算该过程，注意到本次计算用到的序列x的长度为3，记为M=3。

1、当b（1）=-2时，计算a（1）时只用到一组数据——（3，1）注意顺序，只有这两个数据的序号相减（后面数据的序号减去前面的）满足b=-2，因此a（1）的计算公式为：（3*1）/M=1

2、当b（2）=-1时，计算a（2）时用到两组数据——（2，1）和（3，2），这两组数据的序号相减（后面数据的序号减去前面的）满足b=-1，因此a（2）的计算公式为：（2*1+3*2）/M=2.6667

3、当b（3）=0时，计算a（3）时用到三组数据——（1，1）、（2，2）、（3，3），这三组数据的序号相减（后面数据的序号减去前面的）满足b=0，因此a（3）的计算公式为：（1*1+2*2+3*3）/M=4.6667

4、当b（4）=1时，计算a（4）时用到两组数据——（1，2）和（2，3），（读者请对比和情况2的区别），这两组数据的序号相减（后面数据的序号减去前面的）满足b=1，因此a（4）的计算公式为：（1*2+2*3）/M=2.6667

5、当b（5）=2时，计算a（4）时用到一组数据——（1，3），（读者请对比和情况1的区别），这两组数据的序号相减（后面数据的序号减去前面的）满足b=2，因此a（4）的计算公式为：（1*3）/M=1

<strong>第四：注释项为‘coeff’</strong>，[a，b]=xcorr（x，‘coeff’），通过该命令计算的结果为：a= 0.2143 <wbr /> <wbr /> <wbr />0.5714 <wbr /> <wbr /> <wbr /> 1.0000 <wbr /> <wbr /> <wbr /> 0.5714 <wbr /> <wbr /> <wbr /> 0.2143，b=-2 -1 0 1 2，下面介绍计算机如何计算该过程，这种情况实际是将第三种情况下得到的结果进行归一化，使得b=0时对应的值为1，a（1）=1/4.6667=0.2143；a（2）=2.6667/4.6667=0.5714，a（3）=4.6667/4.6667=1，a（4）=2.6667/4.6667=0.5714，a（5）=1/4.6667=0.2143

<wbr />

另：xcorr命令在工程上的应用通常是对时间上的采样数据序列x进行处理，当数据点采完之后交给Matlab处理时，Matlab是不知道你的采样时间间隔的，它仅仅根据上文所述的计算过程对输入的数据序列x进行计算，但我们可以自己定义时间间隔，例如dt=0.01，此时t=dt*b即代表相关性计算中的时间延迟，前半部分是超前，后半部分是滞后，若R=xcorr（x，‘unbiased’），则通过命令：plot（t，R）即可得到该时域信号的自相关函数曲线。