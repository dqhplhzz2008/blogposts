---
ID: 3764
post_title: >
  Python语言程序设计（第7周）知识点整理
post_name: 'python%e8%af%ad%e8%a8%80%e7%a8%8b%e5%ba%8f%e8%ae%be%e8%ae%a1%ef%bc%88%e7%ac%ac7%e5%91%a8%ef%bc%89%e7%9f%a5%e8%af%86%e7%82%b9%e6%95%b4%e7%90%86'
author: 小奥
post_date: 2018-05-07 14:28:52
layout: post
link: >
  http://www.yushuai.me/2018/05/07/3764.html
published: true
tags:
  - Python
  - python学习
categories:
  - Python
---
<h1>第七周：文件和数据格式化</h1><h2>7.1 文件的使用</h2><p><strong>1.文件的类型</strong></p><p style="text-indent:28px">文件是数据的抽象和集合：文件是存储在辅助存储器上的数据序列；文件是数据存储的一种形式；文件展现形态有文本文件和二进制文件。最根本上是二进制文件。</p><p style="text-indent:28px">（1）文本文件：由单一特定编码组成的文件，如UTF-8编码。由于存在文件，也被看成存储着的长字符串。</p><p style="text-indent:28px">（2）二进制文件：文件直接由比特0和1组成，<strong>没有统一字符编码</strong>。一般存在二进制0和1的组织结构，即文件格式。</p><p><strong>2.文件的打开和关闭</strong></p><p style="text-indent:28px">文件处理步骤：打开-操作-关闭。</p><p style="text-indent:28px">在不打开文件的时候，文件处于存储状态。当我们需要对其进行操作的时候，要使文件处于占用状态，此时操作对文件具有独一的、排他的操作。处理完成后，需要将文件关闭。</p><p style="text-indent:28px">python中常用的读文件函数为a.read(size)、a.readline(size)和a.readlines(hint)；常用的写文件函数为a.write(s)、a.writelines(lines)和a.seek(offset)。</p><p style="text-indent:28px">打开文件的方式：</p><p style="text-indent:28px">&lt;变量名&gt;=open(&lt;文件名&gt;,&lt;打开模式&gt;)</p><p style="text-indent:28px">文件名是指文件路径和名称，源文件如果同目录可以省略路径（<strong>路径中的斜杠使用反斜杠/</strong>或者<strong>双斜杠//</strong>）。文件路径的四种方式：1.绝对路径使用反斜杠；2.绝对路径使用双斜杠；3.若文件在程序文件所在目录的子目录中，可以使用例如<strong>./PYE/F.txt</strong>的方式；4.若是相同目录，可直接使用文件名。</p><p style="text-indent:28px">打开模式：文本or二进制、读or写。如表1.1所示。</p><p style="text-align:center">表1.1 打开模式</p><table><tbody><tr class="firstRow"><td width="104" valign="top" style="border-width: 1px; border-color: windowtext; padding: 0px 7px;"><p style="text-align:center">文件打开模式</p></td><td width="449" valign="top" style="border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-top-color: windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-left: none; padding: 0px 7px;"><p style="text-align:center">描述</p></td></tr><tr><td width="104" valign="top" style="border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0px 7px;"><p style="text-align:center">‘r’</p></td><td width="449" valign="top" style="border-top: none; border-left: none; border-bottom-width: 1px; border-bottom-color: windowtext; border-right-width: 1px; border-right-color: windowtext; padding: 0px 7px;"><p>只读模式，默认值，如果文件不存在，返回FileNotFoundError。</p></td></tr><tr><td width="104" valign="top" style="border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0px 7px;"><p style="text-align:center">‘w’</p></td><td width="449" valign="top" style="border-top: none; border-left: none; border-bottom-width: 1px; border-bottom-color: windowtext; border-right-width: 1px; border-right-color: windowtext; padding: 0px 7px;"><p>覆盖模式，文件不存在则创建，否则完全覆盖。</p></td></tr><tr><td width="104" valign="top" style="border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0px 7px;"><p style="text-align:center">‘x’</p></td><td width="449" valign="top" style="border-top: none; border-left: none; border-bottom-width: 1px; border-bottom-color: windowtext; border-right-width: 1px; border-right-color: windowtext; padding: 0px 7px;"><p>创建写模式，文件不存在则创建，存在则返回FileExistsError。</p></td></tr><tr><td width="104" valign="top" style="border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0px 7px;"><p style="text-align:center">‘a’</p></td><td width="449" valign="top" style="border-top: none; border-left: none; border-bottom-width: 1px; border-bottom-color: windowtext; border-right-width: 1px; border-right-color: windowtext; padding: 0px 7px;"><p>追加写模式，文件不存在则创建，存在则在文件最后追加内容。</p></td></tr><tr><td width="104" valign="top" style="border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0px 7px;"><p style="text-align:center">‘b’</p></td><td width="449" valign="top" style="border-top: none; border-left: none; border-bottom-width: 1px; border-bottom-color: windowtext; border-right-width: 1px; border-right-color: windowtext; padding: 0px 7px;"><p>二进制文件模式。</p></td></tr><tr><td width="104" valign="top" style="border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0px 7px;"><p style="text-align:center">‘t’</p></td><td width="449" valign="top" style="border-top: none; border-left: none; border-bottom-width: 1px; border-bottom-color: windowtext; border-right-width: 1px; border-right-color: windowtext; padding: 0px 7px;"><p>文本文件模式，默认值。</p></td></tr><tr><td width="104" valign="top" style="border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0px 7px;"><p style="text-align:center">‘+’</p></td><td width="449" valign="top" style="border-top: none; border-left: none; border-bottom-width: 1px; border-bottom-color: windowtext; border-right-width: 1px; border-right-color: windowtext; padding: 0px 7px;"><p>与r/w/x/a一同使用，在员工能基础上增加同时读写功能。</p></td></tr></tbody></table><p>其它还可以参见：<a href="http://www.yushuai.me/2017/10/18/3494.html">http://www.yushuai.me/2017/10/18/3494.html</a>。该文章中部分内容摘录如下。</p><table><tbody><tr class="firstRow"><td width="553" valign="top" style="border-width: 1px; border-color: windowtext; padding: 0px 7px;"><p>r只读，r+读写，不创建</p><p>w新建只写，w+新建读写，二者都会将文件内容清零</p><p>（以w方式打开，不能读出。w+可读写）</p><p>以a,a+的方式打开文件，附加方式打开</p><p>（a：附加写方式打开，不可读；a+: &nbsp; 附加读写方式打开）</p><p>以 &#39;U&#39; 标志打开文件, 所有的行分割符通过 Python 的输入方法(例#如 read*() )，返回时都会被替换为换行符\n. (&#39;rU&#39; 模式也支持 &#39;rb&#39; 选项) .</p><p>r和U要求文件必须存在</p><p>不可读的打开方式：w和a</p><p>若不存在会创建新文件的打开方式：a，a+，w，w+</p></td></tr></tbody></table><p style="text-indent:28px">文件关闭方式：</p><pre class="brush:python;toolbar:false">&lt;变量名&gt;.close()</pre><p><strong>3.文件内容的读取</strong></p><p style="text-align:center">表1.2 文件内容的读取</p><table><tbody><tr class="firstRow"><td width="113" valign="top" style="border-width: 1px; border-color: windowtext; padding: 0px 7px;"><p style="text-align:center">操作方法</p></td><td width="440" valign="top" style="border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-top-color: windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-left: none; padding: 0px 7px;"><p style="text-align:center">描述</p></td></tr><tr><td width="113" valign="top" style="border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0px 7px;"><p style="text-align:center">a.read(size)</p></td><td width="440" valign="top" style="border-top: none; border-left: none; border-bottom-width: 1px; border-bottom-color: windowtext; border-right-width: 1px; border-right-color: windowtext; padding: 0px 7px;"><p>读入全部内容，如果给出参数size，则只读入前size长度的内容。</p></td></tr><tr><td width="113" valign="top" style="border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0px 7px;"><p style="text-align:center">a.readline(size)</p></td><td width="440" valign="top" style="border-top: none; border-left: none; border-bottom-width: 1px; border-bottom-color: windowtext; border-right-width: 1px; border-right-color: windowtext; padding: 0px 7px;"><p>读入一行内容，如果给出参数size，则只读出该行前size长度的内容。</p></td></tr><tr><td width="113" valign="top" style="border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0px 7px;"><p style="text-align:center">a.readlines(hint)</p></td><td width="440" valign="top" style="border-top: none; border-left: none; border-bottom-width: 1px; border-bottom-color: windowtext; border-right-width: 1px; border-right-color: windowtext; padding: 0px 7px;"><p>读入文件所有行，以每行为元素形成列表，如果给出参数，读入前hint行。</p></td></tr></tbody></table><p style="text-indent:28px">（1）文件的全文本操作</p><p style="text-indent:28px">遍历全文本：方法一（一次性读入，不适合大文件）</p><pre class="brush:python;toolbar:false">fname&nbsp;=&nbsp;input(&quot;请输入要打开的文件名称：&quot;)
fo&nbsp;=&nbsp;open(fname,&#39;r&#39;)
txt.fo.read()
#对全文操作
fo.close()</pre><p style="text-indent:28px">方法二（按数量读入，分步处理）</p><pre class="brush:python;toolbar:false">fname&nbsp;=&nbsp;input(&quot;请输入要打开的文件名称：&quot;)
fo&nbsp;=&nbsp;open(fname,&#39;r&#39;)
txt.fo.read(2)
while&nbsp;txt!=&quot;&quot;:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#对txt进行处理
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;txt.fo.read(2)
fo.close()</pre><p style="text-indent:28px">逐行遍历文件：方法一（一次读入，分行处理）</p><pre class="brush:python;toolbar:false">fname&nbsp;=&nbsp;input(&quot;请输入要打开的文件名称：&quot;)
fo&nbsp;=&nbsp;open(fname,&#39;r&#39;)
txt.fo.read(2)
for&nbsp;line&nbsp;in&nbsp;fo.readlines():
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(line)
fo.close()</pre><p style="text-indent:28px">方法二（分行读入，逐行处理）</p><pre class="brush:python;toolbar:false">fname&nbsp;=&nbsp;input(&quot;请输入要打开的文件名称：&quot;)
fo&nbsp;=&nbsp;open(fname,&#39;r&#39;)
txt.fo.read(2)
for&nbsp;line&nbsp;in&nbsp;fo:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(line)
fo.close()</pre><p><strong>4.数据的文件写入</strong></p><p style="text-align:center">表1.3 数据的文件写入</p><table><tbody><tr class="firstRow"><td width="123" valign="top" style="border-width: 1px; border-color: windowtext; padding: 0px 7px;"><p style="text-align:center">操作方法</p></td><td width="431" valign="top" style="border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-top-color: windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-left: none; padding: 0px 7px;"><p style="text-align:center">描述</p></td></tr><tr><td width="123" valign="top" style="border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0px 7px;"><p style="text-align:center">a.write(s)</p></td><td width="431" valign="top" style="border-top: none; border-left: none; border-bottom-width: 1px; border-bottom-color: windowtext; border-right-width: 1px; border-right-color: windowtext; padding: 0px 7px;"><p>向文件写入一个字符串或字节流。</p></td></tr><tr><td width="123" valign="top" style="border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0px 7px;"><p style="text-align:center">f.writelines(lines)</p></td><td width="431" valign="top" style="border-top: none; border-left: none; border-bottom-width: 1px; border-bottom-color: windowtext; border-right-width: 1px; border-right-color: windowtext; padding: 0px 7px;"><p>将一个元素全为字符串的列表写入文件（所有行被合并一起写入）。</p></td></tr><tr><td width="123" valign="top" style="border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0px 7px;"><p style="text-align:center">f.seek(offset)</p></td><td width="431" valign="top" style="border-top: none; border-left: none; border-bottom-width: 1px; border-bottom-color: windowtext; border-right-width: 1px; border-right-color: windowtext; padding: 0px 7px;"><p>改变当前文件操作指针的位置，offset含义如下：0位文件开头；1位当前位置；2位文件结尾。</p></td></tr></tbody></table><p style="text-indent:28px">例如：</p><pre class="brush:python;toolbar:false">fo&nbsp;=&nbsp;open(fname,&#39;w+&#39;)
ls=[&quot;中国&quot;,&quot;法国&quot;,&quot;美国&quot;]
fo.writelines(ls)
for&nbsp;line&nbsp;in&nbsp;fo:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(line)
fo.close()</pre><p style="text-indent:28px">为什么没有任何输出呢？</p><pre class="brush:python;toolbar:false">fo&nbsp;=&nbsp;open(fname,&#39;w+&#39;)
ls=[&quot;中国&quot;,&quot;法国&quot;,&quot;美国&quot;]
fo.writelines(ls)
fo.seek(0)
for&nbsp;line&nbsp;in&nbsp;fo:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(line)
fo.close()</pre><p>&nbsp;&nbsp;&nbsp; 必须将指针恢复到文件开头才能真正输出信息，否则指针一直在文件最后，所以无法输出文件中的信息。</p><h2>7.2 实例11：自动轨迹绘制</h2><p>基本思路：</p><p style="text-indent:28px">步骤1：定义数据文件格式（接口）。</p><p style="text-indent:28px">步骤2：编写程序，根据文件接口解析参数绘制图形；</p><p style="text-indent:28px">步骤3：编制数据文件。</p><p style="text-indent:28px">数据接口定义是可以随意的，每个人都可以有自己的定义方式。在这里，我们用一行数字代表一次操作：其中第一个数字代表行进距离，第二个代表转向判断（0左转，1右转），第三个数字代表绝对转向角度，第四、五、六个数字代表RGB三个通道颜色（0~1之间的浮点数）。</p><p>代码：</p><pre class="brush:python;toolbar:false">#&nbsp;-*-&nbsp;coding:&nbsp;utf-8&nbsp;-*-
&quot;&quot;&quot;
Created&nbsp;on&nbsp;Tue&nbsp;Apr&nbsp;24&nbsp;21:10:49&nbsp;2018
&nbsp;
@author:&nbsp;davidcheung
&quot;&quot;&quot;
import&nbsp;turtle&nbsp;as&nbsp;t
t.title(&#39;自动轨迹绘制&#39;)
t.setup(800,600,0,0)
t.pencolor(&#39;red&#39;)
t.pensize(5)
#数据读取
datals=[]
f&nbsp;=&nbsp;open(&quot;data.txt&quot;)
for&nbsp;line&nbsp;in&nbsp;f:
&nbsp;&nbsp;&nbsp;&nbsp;line&nbsp;=&nbsp;line.replace(&quot;\n&quot;,&quot;&quot;)
&nbsp;&nbsp;&nbsp;&nbsp;#去掉了每一行提取后变成字符串时的那个引号
&nbsp;&nbsp;&nbsp;&nbsp;datals.append(list(map(eval,line.split(&quot;,&quot;))))
&nbsp;&nbsp;&nbsp;&nbsp;#将去掉逗号的每个数据都转换成数字，然后再转换成列表
&nbsp;&nbsp;&nbsp;&nbsp;#map是将第一个参数里面函数的功能作用于第二个参数的每一个数值
&nbsp;&nbsp;&nbsp;&nbsp;#自动控制
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;in&nbsp;range(len(datals)):
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t.pencolor(datals[i][3],datals[i][4],datals[i][5])
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t.fd(datals[i][0])
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;datals[i][1]:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t.right(datals[i][2])
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t.left(datals[i][2])</pre><h2>7.3 一维数据的格式化和处理</h2><p><strong>1.数据组织的维度</strong></p><p style="text-indent:28px">一维数据是由对等关系的有序或无序数据构成，采用线性方式组织。它对应列表、数组和集合等概念。</p><p style="text-indent:28px">二维数据是由多个一维数据构成，是一维数据的组合形式。表格是典型的二维数据。</p><p style="text-indent:28px">多维数据是由一位或二维数据在新维度上扩展而成。</p><p style="text-indent:28px">高维数据是仅利用最基本的二元关系展示数据间的复杂结构，例如键值对。</p><p style="text-indent:28px">数据的操作周期分为三个阶段：存储&lt;-&gt;表示&lt;-&gt;操作。</p><p style="text-indent:28px">数据存储中我们关心<strong>存储格式</strong>；数据表示是程序表达的方式，我们关心<strong>数据类型</strong>；数据操作我们关心<strong>操作方式</strong>。</p><p><strong>2.一维数据的表示</strong></p><p style="text-indent:28px">如果数据间有序，使用<strong>列表类型</strong>。for循环可以遍历数据，进而对每个数据进行处理。</p><p style="text-indent:28px">如果数据间无序，使用<strong>集合类型</strong>。for循环可以遍历数据，进而对每个数据进行处理。</p><p><strong>3.一维数据的存储</strong></p><p style="text-indent:28px">存储方式一：空格分隔。只用空格分隔，不换行。缺点是数据中不能存在空格。</p><p style="text-indent:28px">存储方式二：逗号分隔。使用英文半角逗号分隔数据，不换行。缺点是数据中不能有英文逗号。</p><p style="text-indent:28px">存储方式三：其他方式。利用特殊符号进行分隔，缺点是需要根据数据特点定义，通用性差。</p><p><strong>4.一维数据的处理</strong></p><p style="text-indent:28px">这里的处理是指将存储于表示相互转换，包括：将存储的数据读入程序，将程序表示的数据写入文件。</p><p style="text-indent:28px">将数据写入文件中，文件中内容采用空格分隔方式。代码如下：</p><pre class="brush:python;toolbar:false">fname&nbsp;=&nbsp;&#39;country.txt&#39;
ls&nbsp;=&nbsp;[&#39;中国&#39;,&#39;美国&#39;,&#39;日本&#39;]
f&nbsp;=&nbsp;open(fname,&#39;w&#39;)
f.write(&#39;&nbsp;&#39;.join(ls))
#将join前面的字符块分隔放入join参数中的字符串
f.close()</pre><h2>7.4 二维数据的格式化和处理</h2><p><strong>1.二维数据的表示</strong></p><p>&nbsp;&nbsp;&nbsp; 使用列表类型，是<strong>二维列表</strong>。这只是一种<strong>基础</strong>的。可以使用两层for循环遍历所有数据。外层列表中，每个元素可以对应一行，也可以对应一列。</p><p><strong>2.CSV格式与二维数据的存储</strong></p><p style="text-indent:28px">CSV，即<strong>Comma-Separated Values</strong>，也就是<strong>用逗号分隔的值</strong>的意思。这是一种国际上通用的一二维数据存储格式，一般用.csv扩展名。它每行一个一维数据，采用逗号分隔，无空行。CSV是数据转换的通用标准格式。CSV有以下约定：</p><p style="text-indent:28px">（1）如果某个元素缺失，逗号仍要保留。</p><p style="text-indent:28px">（2）二维数据的表头可以作为数据存储，也可以另行存储。</p><p style="text-indent:28px">（3）逗号是英文半角逗号，逗号与数据之间没有空格间隔。</p><p style="text-indent:28px">（4）按行存和按列存均可，具体由程序决定。但是一般索引习惯：ls[row][column]，即先行后列。</p><p><strong>3.二维数据的处理</strong></p><p style="text-indent:28px">（1）从CSV格式的文件中读入数据</p><pre class="brush:python;toolbar:false">fo&nbsp;=&nbsp;open(fname)
ls&nbsp;=&nbsp;[]
for&nbsp;line&nbsp;in&nbsp;fo:
&nbsp;&nbsp;&nbsp;&nbsp;line&nbsp;=&nbsp;line.replace(&#39;\n&#39;,&#39;&#39;)
&nbsp;&nbsp;&nbsp;&nbsp;ls.append(line.split(&#39;,&#39;))
fo.close()</pre><p style="text-indent:28px">（2）将数据存入CSV格式的文件中</p><pre class="brush:python;toolbar:false">ls=[[],[],[]]#二维列表
f&nbsp;=&nbsp;open(fname,&#39;w&#39;)
for&nbsp;item&nbsp;in&nbsp;ls:
&nbsp;&nbsp;&nbsp;&nbsp;f.write(&#39;,&#39;.join(item)+&#39;\n&#39;)
f.close()</pre><p style="text-indent:28px">（3）二维数据的逐一处理</p><pre class="brush:python;toolbar:false">ls=[[],[],[]]#二维列表
for&nbsp;row&nbsp;in&nbsp;ls:
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;column&nbsp;in&nbsp;row:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(ls[row][column])</pre><h2>7.5 模块6：worldcloud库的安装和使用</h2><p><strong>1.wordcloud库的安装</strong></p><p>输入命令：</p><p>pip install wordcloud</p><p><strong>2.wordcloud使用</strong></p><p style="text-indent:28px">wordcloud库把词云当作一个WordCloud对象。即wordcloud.WordCloud()代表一个文本对应的词云，它可以根据文本中词语出现频率等参数绘制云。</p><p style="text-indent:28px">它的常规方法：使用w=wordcloud.WordCloud()生成一个词云对象，以该对象为基础，配置参数、加载文本、输出对象。方法如表5.1所示。</p><p style="text-align:center">表5.1 wordcloud库常规方法</p><table><tbody><tr class="firstRow"><td width="123" valign="top" style="border-width: 1px; border-color: windowtext; padding: 0px 7px;"><p style="text-align:center">方法</p></td><td width="431" valign="top" style="border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-top-color: windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-left: none; padding: 0px 7px;"><p style="text-align:center">描述</p></td></tr><tr><td width="123" valign="top" style="border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0px 7px;"><p style="text-align:center">w.generate(txt)</p></td><td width="431" valign="top" style="border-top: none; border-left: none; border-bottom-width: 1px; border-bottom-color: windowtext; border-right-width: 1px; border-right-color: windowtext; padding: 0px 7px;"><p>向WordCloud对象w中加载文本txt。</p></td></tr><tr><td width="123" valign="top" style="border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0px 7px;"><p style="text-align:center">w.to_file(filename</p></td><td width="431" valign="top" style="border-top: none; border-left: none; border-bottom-width: 1px; border-bottom-color: windowtext; border-right-width: 1px; border-right-color: windowtext; padding: 0px 7px;"><p>将词云输出为图像文件，png或者jpg格式。</p></td></tr></tbody></table><p style="text-indent:28px">使用方法：</p><p style="text-indent:28px">（1）配置对象参数。</p><p style="text-indent:28px">（2）使用generate方法加载词云文本。</p><p style="text-indent:28px">（3）输出词云文件。</p><p style="text-indent:28px">示例代码如下：</p><pre class="brush:python;toolbar:false">import&nbsp;wordcloud
c&nbsp;=&nbsp;wordcloud.WordCloud()
c.generate(&quot;wordcloud&nbsp;by&nbsp;Python&quot;)
c.to_file(&quot;ceshi.png&quot;)</pre><p style="text-indent:28px">在这里面，代码做了哪些事情呢？首先，以空格分隔单词。然后统计单词出现次数并过滤。再然后根据统计配置字号。最后布局颜色环境尺寸。</p><p style="text-indent:28px">wordcloud的配置对象参数格式如下：</p><pre class="brush:python;toolbar:false">w=&nbsp;wordcloud.WordCloud(&lt;参数&gt;)</pre><p style="text-indent:28px">其可配置参数如表5.2所示。</p><p style="text-align:center">5.2 配置对象参数</p><table><tbody><tr class="firstRow"><td width="123" valign="top" style="border-width: 1px; border-color: windowtext; padding: 0px 7px;"><p style="text-align:center">参数</p></td><td width="431" valign="top" style="border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-top-color: windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-left: none; padding: 0px 7px;"><p style="text-align:center">描述</p></td></tr><tr><td width="123" valign="top" style="border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0px 7px;"><p style="text-align:center">width</p></td><td width="431" valign="top" style="border-top: none; border-left: none; border-bottom-width: 1px; border-bottom-color: windowtext; border-right-width: 1px; border-right-color: windowtext; padding: 0px 7px;"><p>指定词云对象生成图片的宽度，默认400像素。</p></td></tr><tr><td width="123" valign="top" style="border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0px 7px;"><p style="text-align:center">height</p></td><td width="431" valign="top" style="border-top: none; border-left: none; border-bottom-width: 1px; border-bottom-color: windowtext; border-right-width: 1px; border-right-color: windowtext; padding: 0px 7px;"><p>指定词云对象生成图片的高度，默认200像素。</p></td></tr><tr><td width="123" valign="top" style="border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0px 7px;"><p style="text-align:center">min_font_size</p></td><td width="431" valign="top" style="border-top: none; border-left: none; border-bottom-width: 1px; border-bottom-color: windowtext; border-right-width: 1px; border-right-color: windowtext; padding: 0px 7px;"><p>指定词云中字体的最小字号，默认4号。</p></td></tr><tr><td width="123" valign="top" style="border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0px 7px;"><p style="text-align:center">max_font_size</p></td><td width="431" valign="top" style="border-top: none; border-left: none; border-bottom-width: 1px; border-bottom-color: windowtext; border-right-width: 1px; border-right-color: windowtext; padding: 0px 7px;"><p>指定词云中字体的最大字号，根据高度自动调节。</p></td></tr><tr><td width="123" valign="top" style="border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0px 7px;"><p style="text-align:center">font_step</p></td><td width="431" valign="top" style="border-top: none; border-left: none; border-bottom-width: 1px; border-bottom-color: windowtext; border-right-width: 1px; border-right-color: windowtext; padding: 0px 7px;"><p>指定词云中字体字号的步进间隔，默认为1。</p></td></tr><tr><td width="123" valign="top" style="border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0px 7px;"><p style="text-align:center">font_path</p></td><td width="431" valign="top" style="border-top: none; border-left: none; border-bottom-width: 1px; border-bottom-color: windowtext; border-right-width: 1px; border-right-color: windowtext; padding: 0px 7px;"><p>指定字体文件的路径，默认为None。</p></td></tr><tr><td width="123" valign="top" style="border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0px 7px;"><p style="text-align:center">max_words</p></td><td width="431" valign="top" style="border-top: none; border-left: none; border-bottom-width: 1px; border-bottom-color: windowtext; border-right-width: 1px; border-right-color: windowtext; padding: 0px 7px;"><p>指定词云显示的最大单词数量，默认为200。</p></td></tr><tr><td width="123" valign="top" style="border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0px 7px;"><p style="text-align:center">stop_words</p></td><td width="431" valign="top" style="border-top: none; border-left: none; border-bottom-width: 1px; border-bottom-color: windowtext; border-right-width: 1px; border-right-color: windowtext; padding: 0px 7px;"><p>指定词云的排除词列表，即不显示的单词列表。</p></td></tr><tr><td width="123" valign="top" style="border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0px 7px;"><p style="text-align:center">mask</p></td><td width="431" valign="top" style="border-top: none; border-left: none; border-bottom-width: 1px; border-bottom-color: windowtext; border-right-width: 1px; border-right-color: windowtext; padding: 0px 7px;"><p>指定词云形状，默认为长方形，需要引进imread()函数。例如：</p><p>from scipy.misc import imread</p><p>mk = imread(“pic.png”)</p><p>w= wordcloud.WordCloud(mask=mk)</p></td></tr><tr><td width="123" valign="top" style="border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-top: none; padding: 0px 7px;"><p style="text-align:center">background_color</p></td><td width="431" valign="top" style="border-top: none; border-left: none; border-bottom-width: 1px; border-bottom-color: windowtext; border-right-width: 1px; border-right-color: windowtext; padding: 0px 7px;"><p>指定词云图片的背景颜色，默认为黑色。</p></td></tr></tbody></table><p>例程：</p><pre class="brush:python;toolbar:false">import&nbsp;wordcloud
import&nbsp;jieba
txt&nbsp;=&nbsp;&quot;百度，全球最大的中文搜索引擎、最大的中文网站。\
1999年底，身在美国硅谷的李彦宏看到了中国互联网及中文搜索\
引擎服务的巨大发展潜力，抱着技术改变世界的梦想，他毅然辞掉\
硅谷的高薪工作，携搜索引擎专利技术，于2000年1月1日\
在中关村创建了百度公司&quot;
w&nbsp;=&nbsp;wordcloud.WordCloud(width&nbsp;=&nbsp;1000,\
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height&nbsp;=&nbsp;700,font_path=&quot;msyh.ttc&quot;)
w.generate(&quot;&nbsp;&quot;.join(jieba.lcut(txt)))
w.to_file(&quot;ceshi.png&quot;)</pre><p style="text-indent:28px">图片效果如图1所示。</p><p style="text-align:center"><img src="/wp-content/uploads/image/20180507/1525674508224701.png" title="1525674508224701.png" alt="1525674508224701.png" width="500" height="350"/>&nbsp;</p><p style="text-align:center">图1</p><p><strong>7.6 实例12：政府报告词云</strong></p><p>代码如下：</p><pre class="brush:python;toolbar:false">import&nbsp;jieba
import&nbsp;wordcloud
f&nbsp;=&nbsp;open(&quot;2018年政府工作报告.txt&quot;,&nbsp;&quot;r&quot;,&nbsp;encoding=&quot;utf-8&quot;)
&nbsp;
t&nbsp;=&nbsp;f.read()
f.close()
ls&nbsp;=&nbsp;jieba.lcut(t)
&nbsp;
txt&nbsp;=&nbsp;&quot;&nbsp;&quot;.join(ls)
w&nbsp;=&nbsp;wordcloud.WordCloud(&nbsp;\
&nbsp;&nbsp;&nbsp;&nbsp;width&nbsp;=&nbsp;700,&nbsp;height&nbsp;=&nbsp;300,\
&nbsp;&nbsp;&nbsp;&nbsp;background_color&nbsp;=&nbsp;&quot;white&quot;,
&nbsp;&nbsp;&nbsp;&nbsp;font_path&nbsp;=&nbsp;&quot;msyh.ttc&quot;,max_words&nbsp;=&nbsp;20&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;)
w.generate(txt)
w.to_file(&quot;grwordcloud.png&quot;)</pre><p>结果图如2所示。</p><p style="text-align:center"><img src="/wp-content/uploads/image/20180507/1525674525704663.png" title="1525674525704663.png" alt="1525674525704663.png" width="570" height="244"/>&nbsp;</p><p style="text-align:center">图2</p><p><br/></p>